# Токен

Токен служит для упрощения интеграции с Хантфлоу API и не требует дополнительного процесса авторизации. Наиболее 
частым применением может служить интеграция серверных скриптов или приложений (например, сбор откликов с корпоративного сайта) с Хантфлоу.

Получить токен можно в соотвествующем разделе настроек Хантфлоу.

:warning: Использование персонального токена требует более высокого уровня безопасности в вопросах его хранения и несанкционированного доступа.

<a name="get_token"></a>
## Получение токена
Получить токен (access и refresh) можно через соответствующий раздел в настройках Хантфлоу.
При получении вам будут выданы: **access**_token и **refresh**_token. Срок жизни первого - 7 дней, второго - 14 дней.

По истечении срока жизни access_token необходимо используя refresh_token [обновить access_token](token.md#refresh_token).

<a name="use_token"></a>
## Использование токена

Приложение должно использовать полученный токен при запросах, 
передавая его в заголовке в формате:

```Authorization: Bearer <access_token>```

Для тестирования токена, удобно использовать метод [/me](user.md#me).

```http
GET /me HTTP/1.1
User-Agent: App/1.0 (incaseoffire@example.com)
Host: api.huntflow.ru
Accept: */*
Authorization: Bearer <access_token>
```

<a name="refresh_token"></a>
## Обновление токена
:warning: Данный способ работает **только** для токенов, полученных через интерфейс Хантфлоу в разделе "Токены"

Новый access_token может быть получен только тогда, когда действие текущего access_token истекло.

`POST /token/refresh`

В теле запроса необходимо передать JSON вида:
```json
{
  "refresh_token": "<refresh_token>",
  "grant_type": "refresh_token"
}
```
Пример ответа:
```json
{
    "access_token": "<new_access_token>",
    "token_type": "bearer",
    "expires_in": 604800,
    "refresh_token_expires_in": 1209600,
    "refresh_token": "<new_refresh_token>"
}
```